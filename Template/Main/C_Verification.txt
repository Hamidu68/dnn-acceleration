#include <stdio.h>
#include<iostream>
#include <stdlib.h>
#include<string>
#include<string.h>
#include<math.h>
using namespace std;

typedef float DATA_T;

$def_SW_functions

//argv[1] = init_weight.txt , argv[2] = init_bias.txt , argv[3] = init_input.txt
int main(int argc, char *argv[]){
 
  DATA_T temp;
  int m, x, y, i, j, k, l;
  char * w_line, * b_line, *i_line;
  size_t b_len, w_len, i_len;
  char *i_v, * w_v, *b_v;
  $Shared_static_variables
 
  $SW_static_variables 

  FILE *w_stream = fopen(argv[1], "r");
  if (w_stream == NULL) printf("weight file was not opened");
  FILE *b_stream = fopen(argv[2], "r");
  if (b_stream == NULL) printf("bias file was not opened");
  FILE *i_stream = fopen(argv[3], "r");
  if (i_stream == NULL) printf("i_stream file was not opened");
  FILE *o_stream = fopen("Output/C_output.txt", "w");
  if (o_stream == NULL) printf("Output file was not opened");
 
  printf("[C_verifier.cpp]Start Initialzation\n\n");
  $Initialization
  printf("[C_verifier.cpp]Finish Initialization\n\n");
  $SW_functions  string show_result;
  printf("[C_verifier.cpp]Print Result\n");
  $result
  
  fprintf(o_stream,"%s",show_result.c_str());
  
  fclose(w_stream);
  fclose(b_stream);
  fclose(i_stream);
  fclose(o_stream);
  return 0;
}
